import{r as o,o as m,c,d as a,w as l,a as e,e as t,u as N,f as u}from"./index-1cdb8be6.js";const R=`<?php 
// Generator of a terminal request URL as HTML button. PHP example.

const URL = 'https://agr.uz/sandbox'; // Request target URL
const SECRET_KEY = '#Feiz!ahdahweig7?Choot#3AiL6p--ooF6e'; // Your site SECRET_KEY

// Array of input parameters
$params = array(
    'VENDOR_ID' => '1591864',
    'MERCHANT_TRANS_ID' => 'AB772059',
    'MERCHANT_TRANS_AMOUNT' => '1000',
    'MERCHANT_CURRENCY' => 'sum',
    'MERCHANT_TRANS_NOTE' => 'transaction_note_example',
    'MERCHANT_TRANS_DATA' => 'eyJrZXkxIjoidmFsdWUxIiwia2V5MiI6InZhbHVlMiJ9',
    'SIGN_TIME' => '1480056082732',
);
$params['SIGN_STRING'] = md5(SECRET_KEY . $params['VENDOR_ID'] . $params['MERCHANT_TRANS_ID'] . $params['MERCHANT_TRANS_AMOUNT'] . $params['MERCHANT_CURRENCY'] . $params['SIGN_TIME']); // Signature adding

// Choose one of two options below 
// GET request option. It may not work in IE with more than 2kb transfered data
$url = URL .'?'. http_build_query($params);
echo "<button onclick="location.href='{$url}';">Send</button>";

// POST request option
?>
<form method="post" action="<?=URL;?>">
<?php foreach ($params as $name => $value): ?>
    <input type="hidden" name="<?=$name; ?>" value="<?=$value;?>">
<?php endforeach;?>
    <button type="submit">Send</button>
</form>`,T={class:""},A=e("h2",{class:"text-2xl font-bold my-4"},"Этап 2. Открытие Web-кассы",-1),E=e("h3",{class:"text-xl font-bold my-4"},"Запрос на получение ключа для открытия Web-кассы",-1),h=e("p",{class:"my-4"}," Перед началом интеграции Вам необходимо подготовить инструмент для создания запросов на открытие Web-кассы. Для этого, например, можно использовать форму с кнопкой на вашем сайте, которая будет собирать базовые параметры и отправлять пользователя на Web-кассу. При нажатии на кнопку, пользователь должен быть перенаправлен POST или GET http-запросом на URL-адрес. Для Вашего удобства все тестирование проходит в песочнице (sandbox) нашей системы. ",-1),b=e("p",{class:"mt-4 mb-4"},"Вы можете осуществить открытие Web-кассы в 3 этапа:",-1),C=e("ul",{class:"list-disc ml-10"},[e("li",null,"собрать необходимые минимальные данные для осуществления платежа;"),e("li",null,"рассчитать подпись (signature);"),e("li",null,[t(" перенаправить пользователя на "),e("a",{href:"https://agr.uz/sandbox"},[e("b",null,"https://agr.uz/sandbox")])])],-1),M=e("h3",{class:"text-xl font-bold my-4"},"Минимальный набор параметров для открытия Web-кассы.",-1),f=e("h3",{class:"text-xl font-bold my-4"},"Пример запроса.",-1),I=e("div",null,[e("p",null,[e("b",null,"VENDOR_ID"),t("=1591864 MERCHANT_TRANS_ID=AB772059 MERCHANT_TRANS_AMOUNT=1000 ")]),e("p",null,[e("b",null,"MERCHANT_CURRENCY"),t("=sum MERCHANT_TRANS_NOTE=transaction_note_example")]),e("p",null,[e("b",null,"MERCHANT_TRANS_DATA"),t("=eyJrZXkxIjoidmFsdWUxIiwia2V5MiI6InZhbHVlMiJ9")]),e("p",null,[e("b",null,"MERCHANT_TRANS_RETURN_URL"),t("=http://site.com SIGN_TIME=1480056082732")]),e("p",null,[e("b",null,"SIGN_STRING"),t("=2e483be74e568b4d7d4a7d9421f404fc")])],-1),S=u('<h3 class="text-xl font-bold my-4">Расчёт подписи (параметр SIGN_STRING).</h3><p class="my-4"> Подпись – 32 разрядное шестнадцатеричное число, сформированная односторонним кодированием. Данную строку нельзя декодировать или самостоятельно сгенерировать, не зная всех необходимых составляющих. </p><p>Для формирования подписи используется MD5 - 128-битный алгоритм хеширования.</p><h3 class="text-xl font-bold my-4">Алгоритм формирования подписи.</h3><ul class="list-decimal ml-5"><li><p>Формируется строка на подпись:</p><p class="border-t border-b border-sky-500 p-2 my-4"> Параметры (SECRET_KEY, VENDOR_ID, MERCHANT_TRANS_ID, MERCHANT_TRANS_AMOUNT, MERCHANT_CURRENCY, SIGN_TIME) последовательно соединяются в одну строку (конкатенация) с без использованием символа-разделителя между ними. </p></li><li><p>От полученной строки берется MD5 хэш.</p></li></ul><h3 class="text-xl font-bold my-4">Правила формирования подписи.</h3><ul class="list-decimal ml-5"><li>Кодировка подписываемой строки – UTF-8;</li></ul><h3 class="text-xl font-bold my-4"> Примеры реализации запроса на языках программирования. </h3>',8),x=e("h3",{class:"text-xl font-bold my-4"},"Пример запроса.",-1),H=e("div",null,[e("p",null,[e("b",null,"VENDOR_ID"),t("=1591864")]),e("p",null,[e("b",null,"MERCHANT_TRANS_ID"),t("=AB772059")]),e("p",null,[e("b",null,"MERCHANT_TRANS_AMOUNT"),t("=1000")]),e("p",null,[e("b",null,"MERCHANT_CURRENCY"),t("=sum")]),e("p",null,[e("b",null,"MERCHANT_TRANS_NOTE"),t("=transaction_note_example")]),e("p",null,[e("b",null,"MERCHANT_TRANS_DATA"),t("=eyJrZXkxIjoidmFsdWUxIiwia2V5MiI6InZhbHVlMiJ9")]),e("p",null,[e("b",null,"MERCHANT_TRANS_RETURN_URL"),t("=http://site.com")]),e("p",null,[e("b",null,"SIGN_TIME"),t("=1480056082732")]),e("p",null,[e("b",null,"SIGN_STRING"),t("=2e483be74e568b4d7d4a7d9421f404fc")])],-1),y=e("p",{class:"my-4"}," В данном примере строка для формирования подписи: #Feiz!ahdahweig7?Choot#3AiL6p--ooF6e1591864AB7720591000sum1480056082732 ",-1),U={class:"my-4"},V={__name:"WebkassaOpen",setup(D){const i=[{param:"VENDOR_ID",format:"integer",is_required:"да",description:"Идентификатор сайта в системе",example:1591864},{param:"MERCHANT_TRANS_ID",format:"string (256)",is_required:"да",description:"Уникальный идентификатор заказа в системе Мерчанта.",example:"AB772059"},{param:"MERCHANT_TRANS_AMOUNT",format:"integer",is_required:"да",description:"Сумма платежа",example:1e3},{param:"MERCHANT_CURRENCY",format:"string (10)",is_required:"да",description:"Валюта покупки.",example:"sum"},{param:"MERCHANT_TRANS_NOTE",format:"string (256)",is_required:"да",description:"Текстовый комментарий к проведенной операции",example:"transaction_note_example"},{param:"MERCHANT_TRANS_DATA",format:"string (base64)",is_required:"нет",description:"Детали платежа для Мерчанта. Возвращается Мерчанту",example:"eyJrZXkxIjoidmFsdWUxIiwia2V5MiI6InZhbHVlMiJ9"},{param:"MERCHANT_TRANS_RETURN_URL",format:"string",is_required:"нет",description:"Ссылка для возврата, cм. Возврат пользователя с Web-кассы",example:"http://site.com"},{param:"SIGN_TIME",format:"integer",is_required:"да",description:"Текущее время в миллисекундах",example:1480056082732},{param:"SIGN_STRING",format:"string(md5)",is_required:"да",description:"Подпись запроса, cм. Правила формирования подписи запроса",example:"2e483be74e568b4d7d4a7d9421f404fc"}];return(g,G)=>{const _=o("InlineMessage"),s=o("PrimeChip"),n=o("Column"),r=o("DataTable"),d=o("CodeBlock"),p=o("BlockPagination");return m(),c("div",T,[A,E,h,a(_,{severity:"warn"},{default:l(()=>[t("Тестовый режим предназначен для проведения тестовых транзакций и проверки корректности работы системы. https://agr.uz/sandbox")]),_:1}),b,C,M,e("p",null,[t(" Для открытия Web-кассы Вам достаточно отправлять 7 обязательных параметров: "),a(s,{class:"m-1"},{default:l(()=>[t("VENDOR_ID")]),_:1}),t(", "),a(s,{class:"m-1"},{default:l(()=>[t("MERCHANT_TRANS_ID")]),_:1}),t(", "),a(s,{class:"m-1"},{default:l(()=>[t("MERCHANT_TRANS_AMOUNT")]),_:1}),t(", "),a(s,{class:"m-1"},{default:l(()=>[t("MERCHANT_CURRENCY")]),_:1}),t(", "),a(s,{class:"m-1"},{default:l(()=>[t("MERCHANT_TRANS_NOTE")]),_:1}),t(", "),a(s,{class:"m-1"},{default:l(()=>[t("SIGN_TIME")]),_:1}),t(", "),a(s,{class:"m-1"},{default:l(()=>[t("SIGN_STRING")]),_:1}),t(", ")]),a(r,{rowHover:!0,class:"my-4 leading-5",value:i,tableStyle:"min-width: 50rem"},{default:l(()=>[a(n,{field:"param",header:"Параметр"}),a(n,{field:"format",header:"Формат"}),a(n,{field:"is_required",header:"Обязательный"}),a(n,{field:"description",header:"Описание"}),a(n,{field:"example",header:"Пример"})]),_:1}),f,a(_,{severity:"info my-2"},{default:l(()=>[I]),_:1}),S,a(d,{code:N(R),highlightjs:!0,persistentCopyButton:!0,lang:"php",theme:"atom-one-dark"},null,8,["code"]),x,a(_,{severity:"info my-2"},{default:l(()=>[H]),_:1}),y,e("p",U,[t(" В результате MD5 хэширования этой строки - полученная подпись: "),a(s,null,{default:l(()=>[t("2e483be74e568b4d7d4a7d9421f404fc")]),_:1})]),a(p,{prev:{label:"Этап 1. Подготовка к интеграции",name:"webkassa-preparation"},next:{label:"Этап 3. Merchant API",name:"webkassa-merchant-api"}},null,8,["prev","next"])])}}};export{V as default};
